{
	"id": "module_video",
  "name": "Video Analysis",
	"version": "0.0.1",
	"description": "Capturing and analysing video from cameras to detect motion.",
	"configuration": [
		{
			"title": "Capturing Device",
			"description": "Device responsible for capturing.",
			"key": "video",
			"type": "dyn-dropdown",
			"default": "0"
		},
		{
			"title": "Additional Camera ID",
			"description": "Additional cam id to distinguish multiple capturing devices.",
			"key": "cam_id",
			"type": "int",
			"min": "0",
			"max": "500",
			"default": "1"
		},
		{
			"title": "Grabbing Rate",
			"description": "Determines the interval frames which are grabbed in ms. It is necessary to retrieve the most recent frames. Hence it has to be lower than the processing rate in the next section to work properly.",
			"key": "grab_rate",
			"type": "int",
			"default": "40",
			"min": "10",
			"max": "5000"
		},
		{
			"title": "Processing rate",
			"description": "Determines the interval frames which are processed in ms. Processing frames includes motion detection, highlighting and all kinds of event notification. Low processing rates may lead to high cpu usage.",
			"key": "processing_rate",
			"type": "int",
			"default": "100",
			"min": "10",
			"max": "5000"
		},
		{
			"title": "Frame width",
			"description": "Determines the width of frames which are afterwards processed.",
			"key": "width_frame",
			"type": "int",
			"default": "640",
			"min": "10",
			"max": "1280"
		},
		{
			"title": "Frame height",
			"description": "Determines the height of frames which are afterwards processed.",
			"key": "height_frame",
			"type": "int",
			"default": "390",
			"min": "10",
			"max": "740"
		},
		{
			"title": "BackgroundSubtractor type",
			"description": "Uses either BackgroundSubtractorMOG2 or BackgroundSubtractorMOG, but BackgroundSubtractorMOG2 is faster. Both are Gaussian Mixture-based Background/Foreground Segmentation Algorithms. BackgroundSubtractorMOG2 described in: Z.Zivkovic, Improved adaptive Gausian mixture model for background subtraction, International Conference Pattern Recognition, UK, August, 2004, http://www.zoranz.net/Publications/zivkovic2004ICPR.pdf. BackgroundSubtractorMOG described in:  P. KadewTraKuPong and R. Bowden, An improved adaptive background mixture model for real-time tracking with shadow detection, Proc. 2nd European Workshop on Advanced Video-Based Surveillance Systems, 2001: http://personal.ee.surrey.ac.uk/Personal/R.Bowden/publications/avbs01/avbs01.pdf .",
			"key": "backgroundsubtractor_type",
			"type": "dropdown",
			"default": "2",
			"options": [
				{ "value": "1", "title": "BackgroundSubtractorMOG" },
				{ "value": "2", "title": "BackgroundSubtractorMOG2" }
			]
		},
		{
			"title": "History",
			"description": "Determines the number of frames responsible for background and foreground calculation.",
			"key": "backgroundsubtractor_history",
			"type": "int",
			"default": "150",
			"min": "10",
			"max": "1000"
		},
		{
			"title": "Threshold Backgroundsubtractor",
			"description": "Determines the threshold for the BackgroundSubtractorMOG2: Threshold on the squared Mahalanobis distance to decide whether it is well described by the background model. Low values results in very sensitive motion detection.",
			"key": "backgroundsubtractor_threshold",
			"type": "int",
			"default": "16",
			"min": "0",
			"max": "1000"
		},
		{
			"title": "Shadow",
			"description": "BackgroundSubtractorMOG2 is able to detect shadow. If it is enabled you may want to use it within the motion detection calculations. Therefore you have to adapt the shadow threshold.",
			"key": "backgroundsubtractor_shadow",
			"type": "boolean",
			"default": "false"
		},
		{
			"title": "Blur Size",
			"description": "Reduces noise in captured frames before detection calculations.",
			"key": "motion_detector_blursize",
			"type": "int",
			"default": "5",
			"min": "0",
			"max": "15"
		},
		{
			"title": "Threshold Shadow",
			"description": "Determines the shadow threshold which is included in detection calculations. 1 (High) 255 (Low)",
			"key": "motion_detector_threshold",
			"type": "int",
			"default": "15",
			"min": "1",
			"max": "255"
		},
		{
			"title": "Dilation Iterations",
			"description": "Dilation can be applied several times." ,
			"key": "motion_detector_dilationiterations",
			"type": "int",
			"default": "2",
			"min": "0",
			"max": "10"
		},
		{
			"title": "Dilation Size of Kernel",
			"description": "Dilates the foreground mask generated by the Backgroundsubtractor. The kernel describes how the pixels involved in the computation are combined in order to obtain the desired result.",
			"key": "motion_detector_dilationsize",
			"type": "int",
			"default": "2",
			"min": "0",
			"max": "15"
		},
		{
			"title": "Threshold Contours",
			"description": "Discards countours with an area smaller than the threshold.",
			"key": "motion_detector_contoursthreshold",
			"type": "float",
			"default": "1000",
			"min": "0",
			"max": "10000"
		}
	],
	"actions": [
	],
	"events": [
		{
			"title": "Motion Detection",
			"description": "Detects motion",
			"key": "motion_detection",
			"vars": [
				{
					"title": "Video",
					"key": "video",
					"type": "file",
					"description": "Sends a short video when motion is detected."
				},
				{
					"title": "Image",
					"key": "image",
					"type": "file",
					"description": "Sends an image when motion is detected."
				}
			],
			"configuration": [
				{
					"title": "Region of Interest",
					"description": "Determines the area within motion detection is enabled",
					"key": "collider_rio",
					"type": "areapicker",
					"default": "POLYGON((97 40,97 135,257 135,257 40))"
				},
				{
					"title": "Highlighting",
					"description": "Highlighting of detections.",
					"key": "highlighter",
					"type": "boolean",
					"default": "false"
				},
				{
					"title": "Video Output Frames",
					"description": "Determines the number of frames in the video",
					"key": "video_output_number",
					"type": "float",
					"default": "200",
					"min": "5",
					"max": "500"
				}
			]
		}
	]
}
